<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- bootstap bundle css and icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css">
    <link href="style/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="style/form-240.css" rel="stylesheet" crossorigin="anonymous">
    <!-- integrated google fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- js for rquery -->
    <script type="text/javascript" src="result.js"></script>

    <title>Заказать услугу</title>
</head>

<body>

    <!-- Navbar menu -->
    <nav class="navbar navbar-expand-md navbar-dark py-3 bg-dark">
        <div class="container">
            <a href="#" class="navbar-brand">СБЕРЕЖЕНИЯ И ИНВЕСТИЦИИ</a>


            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">

                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navmenu">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">Главная</a>
                    </li>
                    <li class="nav-item">
                        <a href="services.html" class="nav-link">Налоговая декларация</a>
                    </li>

                    <li class="nav-item">
                        <a href="index.html" class="nav-link">Курс «Налоги инвестора в Казахстане»</a>
                    </li>

                </ul>
            </div>
        </div>
    </nav>

    <!-- Forms -->
    <main class="content">

        <form id="form" action="https://form2channel.com?form=sberinvesttaxform240" method="POST"
            enctype="multipart/form-data">

            <!-- Recipients for the form info -->
            <input type="hidden" name="formto_googlesheets" value="sbekk85@gmail.com,info@sber-invest.kz">
            <input type="hidden" name="formto_email" value="s-bek-k@mail.ru,info@sber-invest.kz">

            <!-- Custom redirects -->
            <input type="hidden" name="formto_redirect" value="index.html">
            <input type="hidden" name="formto_error" value="services.html">

            <!-- Form fields need name and value attributes -->
            <div class="container p-0">

                <div class="m-3">
                    <h1 class="h3 d-inline pt-5 align-middle">Форма оформления заказа</h1>
                </div>

                <div class="btn btn-warning w-100 w-md-50 px-5 my-3 text-start">
                    <div>
                     
                        Тариф: <span id="result-tarif" />
                    </div>
                    <div>
                     
                        Стоимость: <span id="result-price" />
                    </div>
                </div>

                <div class="row">
                    <div class="col-12 col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Фамилия</h5>
                            </div>
                            <div class="card-body form-control">
                                <input id="surname" type="text" name="surname" class="form-control"
                                    placeholder="Фамилия">
                                <small>Error Message</small>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Имя</h5>
                            </div>
                            <div class="card-body form-control">
                                <input type="text" id="name" name="name" class="form-control" placeholder="Имя">
                                <small>Error Message</small>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Отчество</h5>
                            </div>
                            <div class="card-body">
                                <input id="lastname" type="text" name="patronomic" class="form-control"
                                    placeholder="Отчество">
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Электроная почта</h5>
                            </div>
                            <div class="card-body form-control">
                                <input id="email" type="text" name="email" class="form-control" placeholder="e-mail">
                                <small>Error Message</small>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Телефон для связи (сотовый)</h5>
                            </div>
                            <div class="card-body form-control">
                                <input id="tel" type="tel" name="mobile" class="form-control"
                                    pattern="[0-9]{,2}-[0-9]{3}-[0-9]{3}-[0-9]{4}" value="+7">
                                <small>Error Message</small>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Гражданство</h5>
                            </div>
                            <div class="card-body form-control">
                                <input id="citizen" type="text" name="citizen" class="form-control"
                                    placeholder="Казахстан">
                                <small>Error Message</small>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Адрес прописки</h5>
                            </div>
                            <div class="card-body form-control">
                                <input id="adressProp" type="text" name="adressregistration" class="form-control">
                                <small>Error Message</small>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Адрес проживания</h5>
                            </div>
                            <div class="card-body form-control">
                                <input id="adressProzh" type="text" name="adress" class="form-control">
                                <small>Error Message</small>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-lg-6">

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Вы налоговый резидент РК в отчетном периоде? <div
                                        data-bs-toggle="modal" data-bs-target="#exampleModalFullscreen"
                                        class="btn btn-outline-secondary bi bi-mortarboard-fill py-0 fs-4 text-reset">
                                    </div>
                                </h5>
                            </div>

                            <div class="card-body">
                                <div>
                                    <label class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="taxresident" value="option2">
                                        <span class="form-check-label">
                                            Да
                                        </span>
                                    </label>
                                    <label class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="taxresident" value="option3">
                                        <span class="form-check-label">
                                            Нет
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">У вас были операции по продаже ценных бумаг в отчетном
                                    периоде?</h5>
                            </div>
                            <div class="card-body">
                                <div>
                                    <label class="form-check">
                                        <input id="hhh" class="form-check-input" oninput='on_change("hhh","KolOpPoPro")'
                                            type="radio" name="sale1" value="Yes">
                                        <span class="form-check-label">
                                            Да
                                        </span>
                                    </label>
                                    <label class="form-check">
                                        <input class="form-check-input" oninput='on_change("hhh","KolOpPoPro")'
                                            type="radio" name="sale1" value="No">
                                        <span class="form-check-label">
                                            Нет
                                        </span>
                                    </label>
                                    <label class="form-check">
                                        <input class="form-check-input" oninput='on_change("hhh","KolOpPoPro")'
                                            type="radio" name="sale1" value="IDK">
                                        <span class="form-check-label">
                                            Не знаю
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="card" id="KolOpPoPro" style="display:none;">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Укажите количество операций по продаже ценных бумаг за
                                    отчетный период (календарный год)</h5>
                            </div>
                            <div class="card-body">
                                <input type="text" name="sale1quant" class="form-control"
                                    placeholder="Введите количество">
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Вы получали дивиденды в отчетном периоде?</h5>
                            </div>
                            <div class="card-body">
                                <div>
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" value="option1" name="dividend">
                                        <span class="form-check-label">
                                            Да
                                        </span>
                                    </label>
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" value="option2" name="dividend">
                                        <span class="form-check-label">
                                            Нет
                                        </span>
                                    </label>
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" value="option3" name="dividend">
                                        <span class="form-check-label">
                                            Не знаю
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Есть ли основания для включения в налоговую декларацию
                                    других доходов (продажа имущества, авто, получения других доходов)?</h5>
                            </div>
                            <div class="card-body">
                                <div>
                                    <label class="form-check">
                                        <input id="EstLiOsnovDl" class="form-check-input" type="radio" value="option1"
                                            name="includedeclr" oninput='on_change("EstLiOsnovDl","UkKaDrSd")'
                                            value="Yes">
                                        <span class="form-check-label">
                                            Да
                                        </span>
                                    </label>
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" value="option2" name="includedeclr"
                                            oninput='on_change("EstLiOsnovDl","UkKaDrSd")' value="No">
                                        <span class="form-check-label">
                                            Нет
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="card" id="UkKaDrSd" style="display: none">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Укажите какие другие сделки и доходы у вас были за отчетный
                                    период (календарный год).</h5>
                            </div>
                            <div class="card-body">
                                <textarea class="form-control" name="otherdeal"
                                    placeholder="Введите другие сделки"></textarea>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Есть ли основания для налоговых вычетов (стандартные,
                                    другие)? Должна быть шапочка студента рядом, чтобы человек мог нажать ее и
                                    посмотреть какие бывают налоговые вычеты. При нажатии шапочки надо чтобы появлялся
                                    слайд 2. (слайды в приложении).</h5>
                            </div>
                            <div class="card-body">
                                <div>
                                    <label class="form-check">
                                        <input id="EstLiOsnovDlaNalog" class="form-check-input" type="radio"
                                            value="option1" name="taxdeduct"
                                            oninput='on_change("EstLiOsnovDlaNalog","UkazhiOsnovDla")'>
                                        <span class="form-check-label">
                                            Да
                                        </span>
                                    </label>
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" value="option2" name="taxdeduct"
                                            oninput='on_change("EstLiOsnovDlaNalog","UkazhiOsnovDla")'>
                                        <span class="form-check-label">
                                            Нет
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="card" id="UkazhiOsnovDla" style="display: none">
                            <div class="card-header">
                                <h5 class="card-title mb-0">Укажите основания для каких налоговых вычетов у вас есть.
                                </h5>
                            </div>
                            <div class="card-body">
                                <textarea class="form-control" name="taxdeduct1"
                                    placeholder="Введите какие именно вычеты"></textarea>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-success my-3 w-100">Отправить заявку</button>
                

                    </div>

                </div>

            </div>
        </form>
    </main>

    <!-- Modal -->

    <div class="modal fade" id="exampleModalFullscreen" tabindex="-1" aria-labelledby="exampleModalFullscreenLabel"
        style="display: none;" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title h4" id="exampleModalFullscreenLabel">Full screen modal</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img class="img-fluid px-md-5 d-md-block" src="style/img/slide1.png" alt="">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <!-- bootstap js  -->
    <script src="js/bootstrap.bundle.min.js"></script>
    <!-- ajax js for ??????????? -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>
        function on_change(el, text) {
            var selectedOption = document.getElementById(el);
            if (selectedOption.checked) {
                document.getElementById(text).style.display = 'block';
            } else {
                document.getElementById(text).style.display = 'none'; // Hide el
            }

        }
    </script>

    <script>
        const form = document.getElementById('form');
        const name = document.getElementById('name');
        const surname = document.getElementById('surname');
        const lastname = document.getElementById('lastname');
        const email = document.getElementById('email');
        const tel = document.getElementById('tel');
        const citizen = document.getElementById('citizen');
        const adressProp = document.getElementById('adressProp');
        const adressProzh = document.getElementById('adressProzh');

        form.addEventListener('submit', e => {
            e.preventDefault();

            checkInputs();
        });

        function checkInputs() {
            // trim to remove the whitespaces
            const nameValue = name.value.trim();
            const surnameValue = surname.value.trim();
            const lastnameValue = lastname.value.trim();
            const emailValue = email.value.trim();
            const telValue = tel.value.trim();
            const citizenValue = citizen.value.trim();
            const adressPropValue = adressProp.value.trim();
            const adressProzhValue = adressProzh.value.trim();

            if (nameValue === '') {
                setErrorFor(name, 'Заполните поле Имя');
            } else {
                setSuccessFor(name);
            }

            if (surnameValue === '') {
                setErrorFor(surname, 'Заполните поле Фамилия');
            } else {
                setSuccessFor(surname);
            }

            if (lastnameValue === '') {

            } else {
                setSuccessFor(lastname);
            }

            if (emailValue === '') {
                setErrorFor(email, 'Заполните поле Почта');
            } else if (!isEmail(emailValue)) {
                setErrorFor(email, 'Неверный формат почты');
            } else {
                if (!isEmail(emailValue)) {
                    setErrorFor(email, 'Неверный формат почты');
                } else {
                    setSuccessFor(email);
                }
            }

            if (telValue === '') {
                setErrorFor(tel, 'Заполните поле Номер');
            } else if (!validatePhone(telValue)) {
                setErrorFor(tel, 'Неверный номер');
            } else {
                setSuccessFor(tel);
            }

            if (citizenValue === '') {
                setErrorFor(citizen, 'Заполните поле Гражданство');
            } else {
                setSuccessFor(citizen);
            }

            if (adressPropValue === '') {
                setErrorFor(adressProp, 'Заполните поле Адрес прописки');
            } else {
                setSuccessFor(adressProp);
            }

            if (adressProzhValue === '') {
                setErrorFor(adressProzh, 'Заполните поле Адрес проживания');
            } else {
                setSuccessFor(adressProzh);
            }


        }

        function setErrorFor(input, message) {
            const formControl = input.parentElement;
            const small = formControl.querySelector('small');
            formControl.className = 'form-control error';
            small.innerText = message;
        }

        function setSuccessFor(input) {
            const formControl = input.parentElement;
            formControl.className = 'form-control success';
        }

        function isEmail(email) {
            return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email);
        }

        function validatePhone(phoneNumber) {
            var phoneNumberPattern = /^([+]?\d{1,2}[-\s]?|)\d{3}[-\s]?\d{3}[-\s]?\d{4}$/;
            return phoneNumberPattern.test(phoneNumber);
        }

        // SOCIAL PANEL JS
        const floating_btn = document.querySelector('.floating-btn');
        const close_btn = document.querySelector('.close-btn');
        const social_panel_container = document.querySelector('.social-panel-container');

        floating_btn.addEventListener('click', () => {
            social_panel_container.classList.toggle('visible')
        });

        close_btn.addEventListener('click', () => {
            social_panel_container.classList.remove('visible')
        });
    </script>

    <!-- Read a page's GET URL variables and return them as an associative array. -->
    <script src="js/geturl.js"></script>

    <!-- googlesheets - NEED TO REMOVE AT THE END!!!! -->
    <!-- <div class="container">    
        <section class="p-5" id="questions">
        </section>
        <section class="bg-light text-light">
            <div>
                <iframe name="GoogleForm" class="GoogleForm" id="GoogleForm" src="https://docs.google.com/forms/d/e/1FAIpQLScbhbQw9nyMrMnha_fc8_lIasr8Gen6eMd2mSQQPSbi7iuwMQ/viewform?embedded=true" width="520" height="1200" frameborder="0" marginheight="0" marginwidth="0">Загрузка…</iframe> 
            </div>
        </section>
    </div> -->

</body>

</html>